<html>

<head>
   <meta charset="UTF-8">
   <title>EIT Web AR Demo</title>

   <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
   <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
   <script>
      
   </script>
</head>

<body>
   <a-scene
      embedded
      arjs='detectionMode: mono_and_matrix; matrixCodeType: 3x3;'>

      <a-assets>
         <a-mixin id="text"
           text="align: center;
                 width: 6;
                 value: Matboks. Mye info her om denna matboksen."
         ></a-mixin>
          <a-asset>
             <audio id="audioMessageReceived" src="./audio/messageReceived.mp3" preload="auto"></audio>
           </a-asset>
        </a-assets>

      <!-- Generate here: https://au.gmented.com/app/marker/marker.php -->
      <!-- matrixCodeType: 3x3, code/number: 0 -->
      <a-marker type='barcode' value='0'>
         <a-box position='0 0.5 0' color='green' change-color-on-hover></a-box>
         <!-- <a-entity test-box position='0 0.5 0'></a-entity> -->
         
         <!-- <a-text mixin="text" position='0 0.5 0' wrap-count="20" rotation="-90 0 0"></a-text> -->
      </a-marker>
      <a-marker type='barcode' value='1'>
            <a-box sound="src: #audioMessageReceived"></a-box>
      </a-marker>



      <!-- Camera -->
      <a-entity camera>
         <a-cursor></a-cursor>
      </a-entity>
      <!-- /Camera -->

   </a-scene>
   <script>
    scene = document.getElementById("scene")
    scene.addEventListener("markerFound", (e) => {
      console.log('marker found');
      audio = new Audio('./audio/messageReceived.mp3');
      audio.play();
    })
   </script>

   <!-- Logo row -->
   <a href="#"
     style="position:fixed; bottom: 25px; left: 220px;">
     <span>Enable audio</span>
   </a>
   <a href="https://radix.equinor.com/" target="_blank"
      style="position:fixed; bottom: 20px; left: 20px;">
      <img src="./images/omnia-radix-logo.svg" style="height: 2rem;">
   </a>
   <a href="https://statoilsrm.sharepoint.com/sites/DigitalTechnologyLab" target="_blank"
      style="position:fixed; bottom: 25px; left: 120px;">
      <img src="./images/eit-watermark.svg" style="height: 1.7rem;">
   </a>
   <!-- /Logo row -->
</body>

</html>
