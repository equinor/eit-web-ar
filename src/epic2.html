<html>

<head>
   <meta charset="UTF-8">
   <title>Epic 2</title>
   <script>
    // window.onload = function () {

    //     let magSensor = new Magnetometer({frequency: 60});

    //     magSensor.addEventListener('reading', e => {
    //         console.log("Magnetic field along the X-axis " + magSensor.x);
    //         console.log("Magnetic field along the Y-axis " + magSensor.y);
    //         console.log("Magnetic field along the Z-axis " + magSensor.z);
    //     })
    //     magSensor.addEventListener('error', event => {
    //         console.log(event.error.name, event.error.message);
    //     })
    //     magSensor.start();
    // };
    
    
    
    function handleMotionEvent(event) {

        acc.x = event.acceleration.x;
        acc.y = event.acceleration.y;
        acc.z = event.acceleration.z;
        acc.interval = event.interval;

        // velocity.x += acc.interval * acc.x * Math.cos(relOrientation.gamma) * Math.cos(relOrientation.alpha)
        // velocity.y += acc.interval * acc.y * Math.cos(relOrientation.alpha) * Math.cos(relOrientation.beta)
        // velocity.x += acc.interval * acc.z * Math.cos(relOrientation.gamma) * Math.cos(relOrientation.beta)

        // console.log(velocity);
    }

    function handleOrientationEvent(event) {

        // INSTRUKS:
        // * Hold platt mot Lat/lng plassen

        if (Object.keys(initOrientation).length === 0 && initOrientation.constructor === Object) {
            initOrientation.alpha = event.alpha;
            initOrientation.beta = event.beta;
            initOrientation.gamma = event.gamma;
        }

        relOrientation.alpha = event.alpha - initOrientation.alpha;
        relOrientation.beta = event.beta - initOrientation.beta;
        relOrientation.gamma = event.gamma - initOrientation.gamma;

        var alpha = event.alpha;
        var beta = event.beta;
        var gamma = event.gamma;

        // console.log(initOrientation);
        // console.log(alpha + ', ' + beta + ', ' + gamma);
        // console.log(relOrientation);
    }

    function handleAbsoluteOrientation(event) {
        console.log(event);
    }

    let velocity = {
        x: 0,
        y: 0,
        z: 0,
    }
    let acc = {}
    let initOrientation = {};
    let relOrientation = {};
    window.onload = window.addEventListener("deviceorientationabsolute", handleAbsoluteOrientation, true);
    // window.onload = window.addEventListener("devicemotion", handleMotionEvent, true);
    // window.onload = window.addEventListener("deviceorientation", handleOrientationEvent, true);


    // function init() {
    //     console.log("Sensor init");
    //     let acl = new Accelerometer({frequency: 60});

    //     acl.addEventListener('reading', () => {
    //         console.log("Accelerometer along the X-axis " + acl.x);
    //         console.log("Accelerometer along the Y-axis " + acl.y);
    //         console.log("Accelerometer along the Z-axis " + acl.z);
    //     });

    //     acl.start();

    //     let abs = new AbsoluteOrientationSensor({frequency: 60});
    //     abs.addEventListener('reading', () => {
            
    //     });
    // }
    // window.onload = init();
   </script>
</head>

<body style='margin: 0; overflow: hidden;'>
    <a-scene
      vr-mode-ui="enabled: false"
      embedded
      arjs='detectionMode: mono_and_matrix; matrixCodeType: 3x3;'>
        <!-- <a-assets>
            <a-asset-item
                id="castle"
                src="./gltf/castle/scene.gltf"
                preload="auto">
            </a-asset-item>
            <a-asset-item
                id="magnemite"
                src="./gltf/magnemite/scene.gltf"
                preload="auto">
            </a-asset-item>
        </a-assets> -->

        <!-- <a-marker type="barcode" value="4">
            <a-box material="color:green" position="0 0.5 0" toggle-visibility class="cursor-interactive"></a-box>
         </a-marker>

        <a-entity
          id='magnemite1'
          gps-object='object: #magnemite; location: { "lat": 59.959762, "lng": 10.701238 }; scale: 1'>
        </a-entity>
        <a-entity
          id="magnemite2"
          gps-object='object: #magnemite; location: { "lat": 59.959941, "lng": 10.701367 }; scale: 0.6'>
        </a-entity> -->

        <a-camera gps-camera rotation-reader position="0 0 0">
            <a-entity
                cursor="fuse: false"
                raycaster="interval: 20; objects: .cursor-interactive"
                position="0 0 -1"
                geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.015"
                material="color: black; shader: flat"
            ></a-entity>
        </a-camera>

    </a-scene>

   <!-- Logo row -->
   <!-- <a href="https://radix.equinor.com/" target="_blank"
      style="position:fixed; bottom: 20px; left: 20px;">
      <img src="./images/omnia-radix-logo.svg" style="height: 2rem;">
   </a>
   <a href="https://statoilsrm.sharepoint.com/sites/DigitalTechnologyLab" target="_blank"
      style="position:fixed; bottom: 25px; left: 120px;">
      <img src="./images/eit-watermark.svg" style="height: 1.7rem;">
   </a> -->
   <!-- /Logo row -->
</body>


</html>
